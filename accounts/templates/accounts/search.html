{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous"> -->
    <style>
    
   *{
      margin: 0;
      padding: 0;
      font-family: sans-serif;
      box-sizing: border-box;
  }
  
  body{
    width: 100%;
    height: 50vw;
    margin: 0;
    padding: 0;
    background-image: url("/static/image.png");
    background-position: center;
    background-size: cover;
  
  }


  h2{
    color: aliceblue;
  }

/* navbar */
  
nav {
    /* background-color: #333; */
    color: #fff;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 15px;
    width: 100%;
    /* background: rgba(255, 255, 255, 0.2); */
    align-items: center;
    /* backdrop-filter: blur(4px) saturate(200%); */
    margin-top: 15px;
    position: relative;
}

.logo img {
    height: 60px; /* Adjust the height as needed */
    width: auto;
    padding-left: 50px;
}

.contain{
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    padding-right: 30px;
}

/* .nav-links {
    list-style: none;
    display: flex;
}

.nav-links li {
    margin-right: 20px;
}

.nav-links li a {
    color: #fff;
    text-decoration: none;
}

.nav-links li a:hover {
    color: #ccc;
} */


/* container box */
.box{
  display: flex;
      justify-content: center;
      /* align-items: center; */
      /* height: 600px; */
}



/* 
        .container {
            margin-top: 3rem;
            
        } */
        
        table {
            color: #ffffff; /* Set text color to white */
            background-color: transparent; /* Set table background color */
            backdrop-filter: blur(6px);
            border: 2px solid #fff;
            align-items: center;
            justify-content: center;
            border-collapse: collapse;
            width: 100%;
            /* margin-top: 30px; */
        }


        table th,
        table td {
            border: 1px solid #ffffff; /* Set border color to white */
            padding: 14px; /*table size */
            text-align: center;
        }
        td form button {
    background-color: #4CAF50; 
    padding: 5px 8px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

td form button:hover {
    background-color: #45a049;
}

/* action button */
/* action button */
.action-btn1, .action-btn2 {
    background-color: #5fa7d5;
    color: white;
    padding: 5px 10px;
    border-radius: 5px;
    border: 2px solid #5fa7d5;
    text-decoration: none;
    margin-right: 10px; /* Add margin to create space between the buttons */
}

.action-btn1:hover {
    background-color: #45a049;
    text-decoration: none;
    color: white;
    border: 2px solid #45a049;
}

.action-btn2:hover {
    background-color: red;
    text-decoration: none;
    color: white;
    border: 2px solid red;
}




.button-container {
    display: flex;
    justify-content: center;
    gap: 8px; /* Adjust the gap between buttons */
    margin-top: 15px;
}

/* .cancel-button,
.confirm-button {
    background-color: transparent;
    border: 2px solid;
    border-radius: 5px;
    padding: 8px 17px;
    cursor: pointer;
    color: white; 
}

.cancel-button {
    border-color: green;
}

.confirm-button {
    border-color: red;

} */





/* profile */

/* dropdown arrow */

/* profile */
.user-container {
    position: relative;
    display: flex; /* Use flexbox to align items */
    align-items: center; /* Align items vertically */
    margin-top: 3px;
}

.dropdown-arrow {
    width: 15px; /* Adjust size as needed */
    height: 12px;
    cursor: pointer;
    margin-left: 1px; /* Add some space between the user pic and dropdown arrow */
    margin-top: 14px;
}
.user-pic {
    width: 50px; /* Adjust size as needed */
    height: 50px;
    margin-right: 1px;
    cursor: pointer;
}
.user-container:hover .user-pic,
.user-container:hover .dropdown-arrow {
    transform: scale(1.1);
}




/* dropdown */
.submenu-wrap{
    position: absolute;
    top: 100%;
    right: 0%;
    width: 200px;
    max-height: 0px;
    overflow: hidden;
    transition: max-height 0.5s;
    z-index: 1;

}

.submenu-wrap.open-menu{
    max-height: 400px;
    z-index: 1;
}





.submenu{
  background: #ffffff;
    padding: 20px;
    margin: 10px;
    /* border: 2px solid #5fa7d5; */
    border-radius: 10px;
}

.submenu-link{
    display: flex;
    align-items: center;
    text-decoration: none;
    color: #525252;
    margin: 12px 0;
}

.submenu-link p{
    width: 100%;
    /* transition: font-weight 0.3s; */
}

.submenu-link img{
    width: 40px;
    background: #e5e5e5;
    border-radius: 50%;
    padding: 8px;
    margin-right: 15px;
    /* transition: transform 0.3s; */
}



/* 
.submenu-link span{
    font-size: 18px;
    transition: transfrom 0.5s;
}

.submenu-link:hover span{
    transform: translateX(5px);
} */

.submenu-link:hover p{
    font-weight: 600;

}
.submenu-link img:hover{
  transform: scale(1.1);

}



/* nx-btn */
.table-controls {
    display: flex;
    justify-content: center;
    margin-top: 20px; /* Adjust the margin as needed */
    gap: 8px;
}

.table-controls button {
    background-color: transparent;
    border: 2px solid #89CFF0;
    border-radius: 10px;
    font-size: 18px;
    padding: 10px 20px;
    color: #fff;
    cursor: pointer;
    transition: background-color 0.3s, color 0.3s;
}

/* hover color */
.table-controls button:hover{
    background-color: #5fa7d5;
    color: #fff;
    backdrop-filter: blur(1px) saturate(180%);
}


/* {% block additional_styles %}{% endblock %} */
    </style>
</head>
<body>
{% block content %}

<!-- navbar -->
<nav>
    <div class="logo">
        {% csrf_token %}
        <a href="/home">  
        <img src="/static/pip.png" alt="Logo">
        </a>
  </div>
  <div class="user-container" onclick="toggleMenu()">
    <img src="/static/pppp.png" class="user-pic">
    <img src="/static/dropdown.png" class="dropdown-arrow">
</div>
  
  
  <div class="submenu-wrap" id="subMenu">
      <div class="submenu">
          <a href="#" class="submenu-link">
              <img src="/static/profile.png"  alt="Profile">
              <p>Edit Profile</p>
              <!-- <span>></span> -->
          </a>
  
          <a href="#" class="submenu-link">
              <img src="/static/setting.png" alt="Settings">
              <p>Settings</p>
              <!-- <span>></span> -->
          </a>
  
          <a href="{% url 'logout' %}" class="submenu-link">
              <img src="/static/logout.png" alt="Logout">
              <p>Logout</p>
              <!-- <span>></span> -->
          </a>
      </div>
  </div>
  
  </nav>



<div class="box">
<div class="cointainer my-3">
    <h2>Search Results:</h2>
    

<br>
        <div class="table">
            <table>
                    <!-- <thead-light> -->
                    <tr>
                        <th scope="col">S.N</th>
                        <th scope="col">Name</th>
                        <th scope="col">Phone Number</th>
                        <th scope="col">Address</th>
                        <th scope="col">Email</th>
                        <th scope="col">Social Media</th>
                        {% if request.user.is_staff %}
                        <th scope="col">Action</th> <!-- New column for edit and delete buttons -->
                        {% endif %}
                        
                    </tr>
                <!-- </thead> -->
                <tbody>

                    {% for person in per %}
                    <tr>
                        <!-- <td>{{ person.first_name}} {{ person.last_name }}</td> -->
                        
                        <td>
                            {{ forloop.counter }}
                        </td>
                        
                        <td>
                            {% if person.first_name and person.last_name %}
                                {{ person.first_name }} {{ person.last_name }}
                            {% else %}
                               Not Available
                            {% endif %}
                        </td>

                        <td>
                            {% if person.phone.Number and person.phone.Number_type %}
                                {{ person.phone.Number }} ({{ person.phone.Number_type }})
                            {% else %}
                               Not Available
                            {% endif %}
                        </td>
                        <td>
                            {% if person.address and person.address.Address_type %}
                                {{ person.address }} ({{ person.address.Address_type}})
                            {% else %}
                               Not Available
                            {% endif %}
                        </td>
                        <td>
                            {% if person.email.email and person.email.email_type %}
                                {{ person.email.email }} ({{ person.email.email_type }})
                            {% else %}
                               Not Available
                            {% endif %}
                        </td>
                        
                        <td>
                            {% if person.media.User_Name and person.media.Linked_App %}
                                @{{ person.media.User_Name }} ({{ person.media.Linked_App}})
                            {% else %}
                               Not Available
                            {% endif %}
                        </td>
                        {% if request.user.is_staff %}
                        <td>
                            <a href="{%url 'edit' person.id %}" class="action-btn1">Edit</a>
                            <a href="{%url 'delete' person.id%}" class="action-btn2">Delete</a></td>
                            {% endif %}
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="7" >No records found.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            <div class="table-controls">
            <button id="prevButton">Previous</button>
            <button id="nextButton">Next</button>
            
        </div>
    </div>
    
</div>
</div>


<script>
   
 let subMenu = document.getElementById("subMenu");
let userContainer = document.querySelector(".user-container");

function toggleMenu(event) {
    event.stopPropagation(); // Prevent the click event from bubbling up to the body
    subMenu.classList.toggle("open-menu");
}

// Function to hide submenu when clicking outside
function handleClickOutside(event) {
    if (!subMenu.contains(event.target) && !userContainer.contains(event.target)) {
        subMenu.classList.remove("open-menu");
    }
}

// Event listener to handle clicks on the body
document.body.addEventListener("click", handleClickOutside);

// Event listener to handle clicks on the user container
userContainer.addEventListener("click", toggleMenu);

    // Function to show the specified page of rows
    function showPage(pageNumber, rowsPerPage) {
        let startIndex = (pageNumber - 1) * rowsPerPage;
        let endIndex = startIndex + rowsPerPage;

        let rows = document.querySelectorAll(".table tbody tr");

        rows.forEach((row, index) => {
            if (index >= startIndex && index < endIndex) {
                row.style.display = "table-row";
            } else {
                row.style.display = "none";
            }
        });
    }

    // Function to handle next page navigation
    function nextPage() {
        let currentPage = parseInt(document.getElementById("currentPage").innerText);
        let rowsPerPage = parseInt(document.getElementById("rowsPerPage").innerText);

        currentPage++;
        showPage(currentPage, rowsPerPage);

        document.getElementById("currentPage").innerText = currentPage;
    }

    // Function to handle previous page navigation
    function prevPage() {
        let currentPage = parseInt(document.getElementById("currentPage").innerText);
        let rowsPerPage = parseInt(document.getElementById("rowsPerPage").innerText);

        if (currentPage > 1) {
            currentPage--;
            showPage(currentPage, rowsPerPage);

            document.getElementById("currentPage").innerText = currentPage;
        }
    }

    // Event listeners for next and previous buttons
    document.getElementById("nextButton").addEventListener("click", nextPage);
    document.getElementById("prevButton").addEventListener("click", prevPage);

    // Initial display
    let initialRowsPerPage = 5; // Set initial rows per page
    showPage(1, initialRowsPerPage);
    document.getElementById("rowsPerPage").innerText = initialRowsPerPage;
    document.getElementById("currentPage").innerText = 1;
</script>

{% endblock %}


</body>
</html>